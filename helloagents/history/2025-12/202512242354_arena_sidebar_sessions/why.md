# 变更提案: Arena 侧边栏历史会话列表

## 需求背景
当前 “RAG 问答竞技场” 页面以单次提问为核心流程：用户提交问题后获得多模型回答并进行投票。用户在完成一次提问后只能“重新提问”，无法快速回看之前的问题与回答，也无法在多个会话间切换，影响对比效率与可追溯性。

## 产品分析

### 目标用户与场景
- **用户群体:** 需要对比多模型回答质量的评测/产品/研发人员
- **使用场景:** 连续提出多个问题进行对比、回看上一次的答案与引用、在多个问题之间切换进行复盘
- **核心痛点:** 缺少历史会话入口，导致回看困难、重复提问成本高

### 价值主张与成功指标
- **价值主张:** 提供清晰的历史会话入口，让用户可快速切换与回看，提升评测效率
- **成功指标:**
  - 用户可在侧边栏看到历史会话列表并一键切换
  - 会话在刷新页面后仍可保留（本地持久化）
  - 新建会话与删除会话流程清晰可用

### 人文关怀
本功能默认将会话数据保存在浏览器本地，仅用于用户个人工作流；不上传、不过度收集，避免无意泄露用户输入内容。

## 变更内容
1. 在 Arena 页面增加左侧边栏，展示“历史会话列表”
2. 使用 `@ant-design/x` 的 `Conversations` 组件渲染会话列表，并提供“新建会话”入口
3. 在状态层维护会话历史（问题、回答、投票结果等）并进行本地持久化
4. 支持切换会话与删除会话（最小可用功能）

## 影响范围
- **模块:** arena / components / stores / types（可选）/ lib（可选）
- **文件:** `src/routes/index.tsx`、`src/stores/arena.ts`、`src/components/arena/*`、`src/types/arena.ts`（可选）
- **API:** 无新增对外 API；仅复用现有 `arenaApi` 函数级接口
- **数据:** 新增本地持久化 key（localStorage）用于保存会话历史

## 核心场景

### 需求: 历史会话浏览与切换
**模块:** arena
用户可在侧边栏查看历史会话列表，并点击切换到指定会话以回看问题、回答与投票结果。

#### 场景: 切换到历史会话
用户在侧边栏点击某个历史会话。
- 页面展示对应会话的问题与回答
- 投票状态随会话恢复

### 需求: 新建会话
**模块:** arena
用户可通过侧边栏“新建会话”快速开始新的提问流程，而不覆盖历史会话。

#### 场景: 新建会话并提问
用户点击“新建会话”后提交新问题。
- 输入框恢复可编辑状态
- 新会话出现在历史会话列表顶部（或按更新时间排序）

### 需求: 删除会话（最小能力）
**模块:** arena
用户可删除不需要的历史会话，以保持列表整洁。

#### 场景: 删除会话
用户在会话操作菜单中选择删除并确认。
- 会话从列表中移除
- 若删除的是当前会话，自动切换到其他会话或创建新会话

## 风险评估
- **风险:** 本地存储增长导致性能下降或超出配额
  - **缓解:** 限制最大会话数（如 50），超出则丢弃最旧会话
- **风险:** 移动端侧边栏占用空间
  - **缓解:** 移动端使用抽屉（Drawer）展示会话列表（如实现）

