# stores

## 目的
提供全局与业务状态管理能力，统一 UI 状态流转。

## 模块概述
- **职责:** 应用级状态（含持久化）、Arena 业务状态（问题/答案/投票等）
- **状态:** 🚧开发中
- **最后更新:** 2025-12-24

## 规范

### 需求: 应用状态持久化
**模块:** stores
应用级状态以 `app-store` 持久化，刷新后可恢复必要配置。

#### 场景: 刷新页面
刷新后应恢复必要的应用配置（以实现为准）。
- 关键开关/配置被恢复
- 非持久化的临时状态不应被错误恢复

### 需求: Arena 会话历史持久化
**模块:** stores
Arena 需要维护会话列表与当前会话，并持久化到本地存储用于回看与切换。

#### 场景: 刷新后回看会话
用户刷新页面后仍可在侧边栏看到历史会话，并切换回看内容。
- 会话列表与当前会话可恢复
- `isLoading/isVoting` 等瞬态状态不应被持久化

#### 场景: 会话数量控制
为避免本地存储无限增长，会话数量设置上限（例如 50）。
- 超出上限后丢弃最旧会话
- 当前会话必须保留

## 依赖
- lib
- types

## 变更历史
- [202512242354_arena_sidebar_sessions](../../history/2025-12/202512242354_arena_sidebar_sessions/) - 增加 `arena-session-store`（会话历史持久化）
